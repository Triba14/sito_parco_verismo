{% extends "parco_verismo/base.html" %}
{% load static i18n %}

{% block body_class %}has-hero{% endblock %}

{% block title %}{% trans 'Parco Letterario® Giovanni Verga e Luigi Capuana - I luoghi del Verismo' %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock %}

{% block hero_section %}
<header>
    <video class="videobg" autoplay muted loop playsinline disablePictureInPicture oncontextmenu="return false;">
        <source src="{% static 'assets/video/videobg.mp4' %}" type="video/mp4">
    </video>
    <div class="hero-content">
        <h1 class="hero-title">
            {% trans 'Parco Letterario®' %}<br>
            {% trans 'Giovanni Verga e Luigi Capuana' %}
        </h1>
        <p class="hero-subtitle">{% trans '“I luoghi del Verismo a Vizzini, Mineo e Licodia Eubea”' %}</p>
    </div>
</header>
{% endblock %}

{% block content %}

<!-- Sezione: Il Parco -->
<section id="il-parco" class="hp-section hp-parco">
    <div class="hp-quotes-layer" aria-hidden="true">
        <div class="bg-quote bg-quote-1" data-parallax-speed="0.1">
            "Il mare non ha paese nemmen lui, ed è di tutti quelli che lo stanno ad ascoltare"
        </div>
        <div class="bg-quote bg-quote-2" data-parallax-speed="0.15">
            "Bisogna saper fare come le ostriche: quando il mare è in tempesta, lasciar passare l'onda"
        </div>
        <div class="bg-quote bg-quote-3" data-parallax-speed="0.12">
            "Il vero è il fine dell'arte, l'unica sorgente della bellezza"
        </div>
        <div class="bg-quote bg-quote-4" data-parallax-speed="0.08">
            "Dobbiamo studiare il vero, non inventarlo"
        </div>
    </div>

    <div class="container-xl">
        <div class="row justify-content-center">
            <div class="col-lg-10" data-aos="fade-up">
                <div class="hp-content">
                    <h2 class="hp-section-title" data-aos="fade-up">
                        {% trans 'Parco Letterario® Giovanni Verga e Luigi Capuana' %}
                    </h2>
                    
                    <div class="hp-section-separator" data-aos="zoom-in" data-aos-delay="100">
                        <span class="separator-dot"></span>
                    </div>

                    <p class="lead text-justify" data-aos="fade-up" data-aos-delay="200">
                        {% blocktrans trimmed %}
                        Il Parco Letterario® Giovanni Verga e Luigi Capuana valorizza il patrimonio verista attraverso ricerca, percorsi culturali e progetti che coinvolgono la comunità. L'obiettivo è trasformare la memoria letteraria in un motore di sviluppo condiviso, favorendo un turismo culturale responsabile e un territorio in cui identità, storia e futuro dialogano in modo armonioso.
                        {% endblocktrans %}
                    </p>

                    <div class="hp-cta-buttons">
                        <a href="{% url 'missione_visione' %}" class="btn btn-primary">{% trans 'Scopri il Parco' %}</a>
                        <a href="{% url 'comitato_tecnico_scientifico' %}" class="btn btn-outline-primary">{% trans 'Comitato Tecnico' %}</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Sezione: Luoghi e Percorsi -->
<section class="hp-section hp-luoghi py-6">
    <div class="container-xl">
        <div class="text-center mb-5 mb-lg-6">
            <h2 class="hp-section-title">
                {% trans 'Località' %}
            </h2>
            <p class="lead text-secondary text-justify" style="max-width: 600px; margin: 0 auto;" data-aos="fade-up" data-aos-delay="100">
                {% trans 'Scopri i luoghi del Verismo e gli itinerari tematici dedicati a Verga e Capuana.' %}
            </p>
        </div>

        <div class="row g-4">
            <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="200">
                <div class="hp-card hp-card-primary">
                    <div class="hp-card-icon">
                        <i class="bi bi-geo-alt-fill"></i>
                    </div>
                    <h3>Vizzini</h3>
                    <p class="text-justify">{% trans '"Patria letteraria" di Giovanni Verga, dove i capolavori del Verismo dialogano con i luoghi.' %}</p>
                    <a href="{% url 'vizzini' %}" class="hp-card-link">{% trans 'Scopri Vizzini' %} <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>

            <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="300">
                <div class="hp-card hp-card-primary">
                    <div class="hp-card-icon">
                        <i class="bi bi-geo-alt-fill"></i>
                    </div>
                    <h3>Mineo</h3>
                    <p class="text-justify">{% trans 'Città di Luigi Capuana che ha ispirato Il Marchese di Roccaverdina, suo capolavoro, e molte altre novelle.' %}</p>
                    <a href="{% url 'mineo' %}" class="hp-card-link">{% trans 'Scopri Mineo' %} <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>

            <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="400">
                <div class="hp-card hp-card-primary">
                    <div class="hp-card-icon">
                        <i class="bi bi-geo-alt-fill"></i>
                    </div>
                    <h3>Licodia Eubea</h3>
                    <p class="text-justify">{% trans 'Un territorio ricco di storia e tradizioni legato alla grande letteratura verghiana.' %}</p>
                    <a href="{% url 'licodia' %}" class="hp-card-link">{% trans 'Scopri Licodia' %} <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Sezione: Il Corto -->
<section class="hp-section hp-corto py-2">
    <div class="container-xl">
        <!-- Citazione Centrale -->
        <div class="text-center mb-5 mb-lg-6">
            <div class="bg-quote mb-5" data-parallax-speed="0.08" style="position: relative; display: inline-block; max-width: 900px;">
                "In una stanza buia, un uomo fora lentamente una porta con una virrinedda. Da quel piccolo spiraglio filtra un filo di luce e, con esso, il respiro della Sicilia. Emergono voci, figure, paesaggi: i personaggi di Giovanni Verga e Luigi Capuana prendono forma come ombre vive, fatte di memoria e vento. Tra nostalgia e distanza, tra appartenenza e fuga, il corto attraversa i luoghi del Verismo e i paesi di Vizzini, Mineo e Licodia Eubea, restituendo un'isola viva, inquieta, mai conclusa. Un racconto simbolico sulla letteratura come ferita luminosa, capace ancora oggi di aprire la notte e chiamare chi sa fermarsi ad ascoltare."
            </div>
        </div>

        <!-- Video e Testo -->
        <div class="row g-5 align-items-center mb-5">
            <!-- Colonna Sinistra: Testo -->
            <div class="col-lg-6" data-aos="fade-right">
                <div class="hp-content">
                    <p class="text-justify mb-4">
                        {% blocktrans trimmed %}
                        Il "Parco Letterario® Giovanni Verga e Luigi Capuana - I luoghi del Verismo a Vizzini, Mineo e Licodia Eubea", promosso e gestito dal Centro Studi C.E.S.T.A., è un progetto culturale convenzionato con i Comuni di Vizzini, Mineo e Licodia Eubea ed è ufficialmente entrato a far parte del circuito dei Parchi Letterari Italiani®, con l'obiettivo di valorizzare in modo unitario i luoghi, la memoria e l'eredità letteraria del Verismo.
                        {% endblocktrans %}
                    </p>
                    
                    <div class="crediti mt-4">
                        <p><strong>{% trans 'Con la partecipazione straordinaria di' %}</strong> Domenico Centamore</p>
                        
                        <p class="mt-3 mb-2"><strong>{% trans 'Crediti' %}</strong></p>
                        <ul class="list-unstyled">
                            <li><strong>{% trans 'Testo:' %}</strong> Mario Luca Testa</li>
                            <li><strong>{% trans 'Regia:' %}</strong> Associazione Teatro Skenè APS</li>
                            <li><strong>{% trans 'Riprese:' %}</strong> Michelangelo Lentini, Rossandra Pepe</li>
                            <li><strong>{% trans 'Montaggio:' %}</strong> Rossandra Pepe</li>
                            <li><strong>{% trans 'Assistenti al montaggio:' %}</strong> Delia Di Pasquale, Veronica Garra</li>
                        </ul>
                        
                        <p class="small text-muted mt-3">
                            {% trans "Si ringraziano le Amministrazioni comunali di Vizzini, Mineo e Licodia Eubea." %}
                        </p>
                        <p class="small text-muted">
                            {% trans "Progetto finanziato dalla Regione Siciliana – Assessorato dei Beni Culturali e dell'Identità Siciliana." %}
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Colonna Destra: Video -->
            <div class="col-lg-6" data-aos="fade-left">
                <div class="ratio ratio-16x9 shadow-lg rounded overflow-hidden">
                    <iframe src="https://www.youtube.com/embed/uPwfnlw53A4" title="Il Corto - Parco Letterario del Verismo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen loading="lazy"></iframe>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Sezione: Eventi Recenti & Notizie -->
<section class="hp-section hp-eventi-notizie py-6">
    <div class="container-xl">
        <div class="text-center mb-5 mb-lg-6">
            <h2 class="hp-section-title">{% trans 'Eventi & Notizie' %}</h2>
            <p class="lead text-secondary text-justify" style="max-width: 700px; margin: 0 auto;">{% trans "Ultimi eventi e aggiornamenti dal Parco" %}</p>
        </div>

        <div class="row g-4">
            <div class="col-lg-6" data-aos="fade-right">
                <div class="hp-card">
                    <h3 class="mb-3">{% trans 'Eventi recenti' %}</h3>
                    <ul class="list-unstyled mb-3">
                        {% if eventi %}
                            {% for evento in eventi %}
                                <li class="mb-3">
                                    <a href="{{ evento.get_absolute_url }}" class="d-block text-decoration-none">
                                        <strong class="d-block">{{ evento.titolo }}</strong>
                                        <small class="text-muted"><i class="bi bi-calendar-event me-1"></i>{{ evento.data_inizio|date:"d/m/Y" }}{% if evento.luogo %} · <i class="bi bi-geo-alt"></i> {{ evento.luogo }}{% endif %}</small>
                                    </a>
                                </li>
                            {% endfor %}
                        {% else %}
                            <li class="text-muted">{% trans 'Nessun evento recente' %}</li>
                        {% endif %}
                    </ul>
                    <div class="text-center">
                        <a href="{% url 'eventi' %}" class="btn btn-outline-primary">{% trans 'Vedi tutti gli eventi' %}</a>
                    </div>
                </div>
            </div>

            <div class="col-lg-6" data-aos="fade-left">
                <div class="hp-card">
                    <h3 class="mb-3">{% trans 'Notizie recenti' %}</h3>
                    <ul class="list-unstyled mb-3">
                        {% if notizie %}
                            {% for notizia in notizie %}
                                <li class="mb-3" data-aos="fade-up" data-aos-delay="100">
                                    <a href="{{ notizia.get_absolute_url }}" class="d-block text-decoration-none">
                                        <strong class="d-block">{{ notizia.titolo }}</strong>
                                        <small class="text-muted"><i class="bi bi-calendar me-1"></i>{{ notizia.data_pubblicazione|date:"d/m/Y" }}</small>
                                    </a>
                                </li>
                            {% endfor %}
                        {% else %}
                            <li class="text-muted">{% trans 'Nessuna notizia recente' %}</li>
                        {% endif %}
                    </ul>
                    <div class="text-center">
                        <a href="{% url 'notizie' %}" class="btn btn-outline-primary">{% trans 'Leggi tutte le notizie' %}</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Sezione: Archivi e Documenti -->
<section class="hp-section hp-archivi py-6">
    <div class="container-xl">
        <div class="row g-4 align-items-center">
            <div class="col-lg-6" data-aos="fade-right">
                <div class="hp-image-wrapper">
                    <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg" class="hp-illustration">
                        <defs>
                            <linearGradient id="archGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#2F6D5C;stop-opacity:0.2" />
                                <stop offset="100%" style="stop-color:#C76A52;stop-opacity:0.2" />
                            </linearGradient>
                        </defs>
                        <rect width="500" height="500" fill="url(#archGrad)"/>
                        <g transform="translate(150, 120)">
                            <rect x="0" y="0" width="200" height="240" fill="none" stroke="#823228" stroke-width="2.5" rx="5"/>
                            <line x1="50" y1="0" x2="50" y2="240" stroke="#C76A52" stroke-width="1.5" opacity="0.7"/>
                            <line x1="100" y1="0" x2="100" y2="240" stroke="#C76A52" stroke-width="1.5" opacity="0.7"/>
                            <line x1="150" y1="0" x2="150" y2="240" stroke="#C76A52" stroke-width="1.5" opacity="0.7"/>
                            <line x1="0" y1="40" x2="200" y2="40" stroke="#C08C3B" stroke-width="1" opacity="0.6"/>
                            <line x1="0" y1="80" x2="200" y2="80" stroke="#C08C3B" stroke-width="1" opacity="0.6"/>
                            <line x1="0" y1="120" x2="200" y2="120" stroke="#C08C3B" stroke-width="1" opacity="0.6"/>
                            <line x1="0" y1="160" x2="200" y2="160" stroke="#C08C3B" stroke-width="1" opacity="0.6"/>
                            <line x1="0" y1="200" x2="200" y2="200" stroke="#C08C3B" stroke-width="1" opacity="0.6"/>
                        </g>
                        <text x="250" y="450" font-family="serif" font-size="24" font-weight="bold" fill="#823228" opacity="0.4" text-anchor="middle">{% trans 'Risorse Documentali' %}</text>
                    </svg>
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left">
                <div class="hp-content">
                    <h2 class="hp-section-title">
                        {% trans 'Archivi & Documenti' %}
                    </h2>
                    <p class="lead mb-4 text-justify">
                        {% trans 'Accedi agli archivi fotografici, agli studi critici e ai documenti storici sul patrimonio verista.' %}
                    </p>
                    <ul class="hp-features">
                        <li><i class="bi bi-check-circle"></i> {% trans 'Verga e Capuana Fotografi' %}</li>
                        <li><i class="bi bi-check-circle"></i> {% trans 'Studi e ricerche' %}</li>
                        <li><i class="bi bi-check-circle"></i> {% trans 'Documenti storici e manoscritti' %}</li>
                    </ul>
                    <div class="hp-cta-buttons">
                        <a href="{% url 'verga_capuana_fotografi' %}" class="btn btn-primary">
                            {% trans 'Verga e Capuana Fotografi' %}
                        </a>
                        <a href="{% url 'documenti' %}" class="btn btn-outline-primary">
                            {% trans 'Documenti' %}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Sezione: Opere & Letteratura -->
<section class="hp-section hp-eventi hp-opere-section py-6">
    <div class="container-xl">
        <div class="text-center mb-5 mb-lg-6">
            <h2 class="hp-section-title">
                {% trans 'Opere & Letteratura' %}
            </h2>
            <p class="lead text-secondary text-justify" style="max-width: 600px; margin: 0 auto;">
                {% trans 'Esplora i testi e i protagonisti del mondo verista.' %}
            </p>
        </div>

        <div class="row g-4">
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="hp-card hp-card-secondary">
                    <div class="hp-card-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    <h3>{% trans 'Opere di Verga' %}</h3>
                    <p class="text-justify">{% trans 'Catalogo e risorse sulle opere di Giovanni Verga, ispirate dai luoghi del Parco, saggi ed edizioni critiche.' %}</p>
                    <a href="{% url 'opere_per_autore' 'giovanni-verga' %}" class="hp-card-link">{% trans 'Scopri le opere' %} <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>

            <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                <div class="hp-card hp-card-secondary">
                    <div class="hp-card-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    <h3>{% trans 'Opere di Capuana' %}</h3>
                    <p class="text-justify">{% trans 'Catalogo e risorse sulle opere di Luigi Capuana, ispirate dai luoghi del Parco, saggi ed edizioni critiche.' %}</p>
                    <a href="{% url 'opere_per_autore' 'luigi-capuana' %}" class="hp-card-link">{% trans 'Scopri le opere' %} <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>

            <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
                <div class="hp-card hp-card-secondary">
                    <div class="hp-card-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    <h3>{% trans 'Personaggi & Lessico del Verismo' %}</h3>
                    <p class="text-justify">{% trans 'Schede sui personaggi principali, lessico caratteristico e termini letterari del Verismo.' %}</p>
                    <a href="{% url 'personaggi_lessico' %}" class="hp-card-link">{% trans 'Approfondisci' %} <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Sezione: Contatto / Richiesta (split: form a sinistra, info a destra) -->
<section id="richiesta-contatto" class="hp-section hp-cta-final py-6">
    <div class="container-xl">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="hp-contact-center">
                    <div class="hp-contact-column d-flex justify-content-center">
                        <div class="hp-contact-card" data-aos="zoom-in">
                            <div class="text-center mb-4">
                                <h2 class="hp-section-title">{% trans "Modulo di contatto" %}</h2>
                                <p class="lead text-secondary text-justify mt-3" style="max-width: 700px; margin-left: auto; margin-right: auto;">
                                    {% trans 'Per richieste di informazioni, proposte di collaborazione, eventi e comunicazioni istituzionali è possibile utilizzare il modulo di contatto sottostante. Il messaggio sarà indirizzato all’email ufficiale del Parco Letterario.' %}
                                </p>
                                <p class="text-secondary text-justify" style="max-width: 700px; margin-left: auto; margin-right: auto;">
                                    {% trans 'Per prenotazioni di visite guidate e attività didattiche, rivolgersi ai' %} <a href="{% url 'contatti' %}#partner">{% trans 'Partner territoriali' %}</a>.
                                </p>
                            </div>

                            {% if messages %}
                                {% for message in messages %}
                                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                                        {{ message }}
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                {% endfor %}
                            {% endif %}

                            <form class="hp-contact-form" method="post">
                                {% csrf_token %}
                                {% if form.non_field_errors %}
                                    <div class="alert alert-danger">{{ form.non_field_errors }}</div>
                                {% endif %}
                                <div class="row">
                                    <div class="col-md-6 form-group">
                                        <label for="{{ form.nome.id_for_label }}" class="form-label mb-2">
                                            {{ form.nome.label }} {% if form.nome.field.required %}<span class="required">*</span>{% endif %}
                                        </label>
                                        {{ form.nome }}
                                        {% for err in form.nome.errors %}<div class="invalid-feedback d-block">{{ err }}</div>{% endfor %}
                                    </div>
                                    
                                    <div class="col-md-6 form-group">
                                        <label for="{{ form.cognome.id_for_label }}" class="form-label mb-2">
                                            {{ form.cognome.label }} {% if form.cognome.field.required %}<span class="required">*</span>{% endif %}
                                        </label>
                                        {{ form.cognome }}
                                        {% for err in form.cognome.errors %}<div class="invalid-feedback d-block">{{ err }}</div>{% endfor %}
                                    </div>

                                    <div class="col-md-6 form-group">
                                        <label for="{{ form.ente.id_for_label }}" class="form-label mb-2">
                                            {{ form.ente.label }} <span class="optional">({% trans 'facoltativo' %})</span>
                                        </label>
                                        {{ form.ente }}
                                        {% for err in form.ente.errors %}<div class="invalid-feedback d-block">{{ err }}</div>{% endfor %}
                                    </div>
                                    
                                    <div class="col-md-6 form-group">
                                        <label for="{{ form.email.id_for_label }}" class="form-label mb-2">
                                            {{ form.email.label }} {% if form.email.field.required %}<span class="required">*</span>{% endif %}
                                        </label>
                                        {{ form.email }}
                                        {% for err in form.email.errors %}<div class="invalid-feedback d-block">{{ err }}</div>{% endfor %}
                                    </div>
                                    
                                    <div class="col-12 form-group">
                                        <label for="{{ form.oggetto.id_for_label }}" class="form-label mb-2">
                                            {{ form.oggetto.label }} {% if form.oggetto.field.required %}<span class="required">*</span>{% endif %}
                                        </label>
                                        {{ form.oggetto }}
                                        {% for err in form.oggetto.errors %}<div class="invalid-feedback d-block">{{ err }}</div>{% endfor %}
                                    </div>
                                    
                                    <div class="col-12 form-group">
                                        <label for="{{ form.messaggio.id_for_label }}" class="form-label mb-2">
                                            {{ form.messaggio.label }} {% if form.messaggio.field.required %}<span class="required">*</span>{% endif %}
                                        </label>
                                        {{ form.messaggio }}
                                        {% for err in form.messaggio.errors %}<div class="invalid-feedback d-block">{{ err }}</div>{% endfor %}
                                    </div>
                                    
                                    <div class="col-12 text-center mt-3">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            <i class="bi bi-send me-2"></i>
                                            {% trans 'Invia messaggio' %}
                                        </button>
                                        <div class="form-note mt-2">
                                            {% trans 'I campi contrassegnati con' %} <span class="required">*</span> {% trans 'sono obbligatori.' %}
                                        </div>
                                        <div class="form-note mt-1">
                                            <small>
                                                <a href="{% url 'contatti' %}#privacy" class="text-muted">
                                                    {% trans 'Informativa sulla privacy' %}
                                                </a>
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var video = document.querySelector('.videobg');
        if(video) {
            video.muted = true;
            var playPromise = video.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    console.log("Video autoplay started successfully");
                }).catch(error => {
                    console.error("Auto-play error details:", error);
                    console.log("Error Name:", error.name);
                    console.log("Error Message:", error.message);
                    
                    if (error.name === 'NotAllowedError') {
                        console.log("Autoplay blocked by browser policy (user interaction required).");
                    } else if (error.name === 'AbortError') {
                        console.log("Autoplay aborted (loading issue?).");
                    }

                    // Fallback attempt
                    video.muted = true;
                    video.play().catch(e => console.error("Fallback mute-and-play also failed:", e));
                });
            }
        }
    });
</script>
{% endblock %}


